<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- Load AWS Amplify SDK -->
    <script src="https://cdn.jsdelivr.net/npm/aws-amplify@latest/dist/aws-amplify.min.js"></script>
    <style>
        body {
            background-color: #1a202c;
            color: white;
            font-family: 'Arial', sans-serif;
        }
        .login-container {
            max-width: 400px;
            margin: auto;
            margin-top: 10%;
            background-color: rgba(55, 65, 81, 0.9);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <div class="login-container">
        <h1 class="text-2xl font-bold text-blue-400 mb-4">Login</h1>
        <button id="google-signin-button" class="w-full bg-red-500 text-white py-2 px-4 rounded hover:bg-red-700">
            Sign in with Google
        </button>
        <p id="login-status" class="mt-4 text-red-500"></p>
    </div>

    <script type="module">
        import { Authenticator } from '@aws-amplify/ui-react';
import { Amplify } from 'aws-amplify';
import '@aws-amplify/ui-react/styles.css';
import outputs from "../amplify_outputs.json";

Amplify.configure(outputs);

export default function App() {
  return (
    <Authenticator>
      {({ signOut, user }) => (
        <main>
          <h1>Hello {user?.username}</h1>
          <button onClick={signOut}>Sign out</button>
        </main>
      )}
    </Authenticator>
  );
}

        // Configure Amplify with Cognito
        Amplify.configure({
            Auth: {
                region: 'us-east-1', // Replace with your AWS region
                userPoolId: 'us-east-1_91ty2Mu0Q', // Replace with your Cognito User Pool ID
                userPoolWebClientId: '6s2ql3g8ddne8j46janh1a768q', // Replace with your User Pool Client ID
                identityPoolId: 'us-east-1:8a251cbd-3ab7-4996-8cea-13600df8a4a7', // Replace with your Identity Pool ID
                oauth: {
                    domain: 'https://derrick-weil.auth.us-east-1.amazoncognito.com', // Replace with your Cognito domain
                    scope: ['openid', 'email', 'profile'],
                    redirectSignIn: 'https://derrick-weil.com/callback', // Your allowed callback URL
                    redirectSignOut: 'https://derrick-weil.com/',
                    responseType: 'code', // or 'token', depending on your app's requirements
                }
            }
        });

        // Handle Google Sign-In button click
        document.getElementById('google-signin-button').addEventListener('click', () => {
            Amplify.Auth.federatedSignIn({ provider: 'Google' });
            try {
                Amplify.Auth.federatedSignIn({ provider: 'Google' });
                console.log('Federated sign-in initiated');
            } catch (error) {
                console.error('Error initiating federated sign-in:', error);
                document.getElementById('login-status').textContent = 'Error: ' + error.message;
            }
        });
    </script>
</body>
</html>
